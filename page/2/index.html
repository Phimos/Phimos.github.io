<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 7.3.0">
<link href="https://cdn.bootcss.com/KaTeX/0.7.1/katex.min.css" rel="stylesheet">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://phimos.github.io').hostname,
    root: '/',
    scheme: 'Muse',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Pims的博客">
<meta property="og:url" content="http://phimos.github.io/page/2/index.html">
<meta property="og:site_name" content="Pims的博客">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Pims">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://phimos.github.io/page/2/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false
  };
</script>

  <title>Pims的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Pims的博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Pims的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2022/02/18/vscode-config/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2022/02/18/vscode-config/" class="post-title-link" itemprop="url">Visual Studio Code配置指南</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2022-02-18 14:03:13" itemprop="dateCreated datePublished" datetime="2022-02-18T14:03:13+08:00">2022-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>VSCode作为一个轻量级、跨平台的代码编辑器，在各种插件的支持下可以达到媲美IDE的编程开发体验。可以让人在一个编辑器中完成各种编程语言的开发工作，并且支持远程开发和协同开发。这里记录一些个人关于VSCode的基本设置，便于快速的在一台新的机器上配置好VSCode，并且满足基本的编程需求。相关的插件和配置列表可能会随着时间列表不断进行更新。</p>
<h2 id="外观"><a class="markdownIt-Anchor" href="#外观"></a> 外观</h2>
<h3 id="字体"><a class="markdownIt-Anchor" href="#字体"></a> 字体</h3>
<ul>
<li>
<p>JetBrains Mono</p>
<ul>
<li>
<p>通过<a target="_blank" rel="noopener" href="https://www.jetbrains.com/lp/mono/">官方下载地址</a>进行下载安装</p>
</li>
<li>
<p>setting.json 中添加</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;editor.fontFamily&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JetBrains Mono&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;terminal.integrated.fontFamily&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JetBrains Mono&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li>
<p>Font Switcher</p>
<ul>
<li>拓展商店安装</li>
</ul>
</li>
</ul>
<h3 id="颜色主题"><a class="markdownIt-Anchor" href="#颜色主题"></a> 颜色主题</h3>
<ul>
<li>
<p>One Dark Pro</p>
<ul>
<li>拓展商店安装</li>
</ul>
</li>
<li>
<p>file-icons</p>
<ul>
<li>拓展商店安装</li>
</ul>
</li>
<li>
<p>Bracket Pair Colorizer</p>
<ul>
<li>拓展商店安装</li>
</ul>
</li>
<li>
<p>Chinese (Simplified) (简体中文) Language Pack for Visual Studio Code</p>
<ul>
<li>拓展商店安装</li>
<li>为VSCode页面提供中文支持</li>
</ul>
</li>
<li>
<p>Better Comments</p>
<ul>
<li>拓展商店安装</li>
<li>为注释提供更加丰富的颜色分类</li>
</ul>
</li>
<li>
<p>Ruler</p>
<ul>
<li>
<p>setting.json中添加</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;editor.rulers&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span><span class="number">80</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>在80个字符的位置提供一条标尺</p>
</li>
</ul>
</li>
</ul>
<h2 id="远程开发"><a class="markdownIt-Anchor" href="#远程开发"></a> 远程开发</h2>
<ul>
<li>Remote -SSH
<ul>
<li>拓展商店安装</li>
</ul>
</li>
</ul>
<h2 id="编程相关"><a class="markdownIt-Anchor" href="#编程相关"></a> 编程相关</h2>
<ul>
<li>Code Runner
<ul>
<li>拓展商店安装</li>
</ul>
</li>
</ul>
<h3 id="python"><a class="markdownIt-Anchor" href="#python"></a> Python</h3>
<ul>
<li>
<p>Python Extension Pack</p>
<ul>
<li>拓展商店安装</li>
</ul>
</li>
<li>
<p>Mypy</p>
<ul>
<li>拓展商店安装</li>
<li>为Python提供静态类型检查</li>
</ul>
</li>
<li>
<p>Black</p>
<ul>
<li>
<p>setting.json中添加</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;python.formatting.provider&quot;</span><span class="punctuation">:</span> <span class="string">&quot;black&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;editor.formatOnSave&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li>
<p>为Python提供代码格式化</p>
</li>
</ul>
</li>
</ul>
<h3 id="辅助编程"><a class="markdownIt-Anchor" href="#辅助编程"></a> 辅助编程</h3>
<ul>
<li>GitHub Copilot
<ul>
<li>拓展商店安装</li>
<li>需要绑定GitHub账号</li>
</ul>
</li>
</ul>
<h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2>
<ul>
<li>LeetCode
<ul>
<li>拓展商店安装</li>
</ul>
</li>
<li>Docker
<ul>
<li>拓展商店安装</li>
</ul>
</li>
<li>Kubernetes
<ul>
<li>拓展商店安装</li>
</ul>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/10/21/pku-no-run/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/21/pku-no-run/" class="post-title-link" itemprop="url">利用GPS模拟进行跑步打卡</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-21 23:44:16" itemprop="dateCreated datePublished" datetime="2021-10-21T23:44:16+08:00">2021-10-21</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>本文仅作为技术分享，希望大家都能够拥有锻炼的自由，但不鼓励使用技术进行跑步打卡</strong></p>
<p>针对北大的校园体育课跑步打卡，已经有如<a target="_blank" rel="noopener" href="https://github.com/PKUNoRun/PKUNoRun">PKUNoRun</a>这样的开源项目，但是PKUNoRun仅仅支持安卓平台的PKURunner用户，使用如乐动力等其他软件作为打卡方式的并不能很方便的使用。</p>
<p>本文采取的思路为进行GPS定位模拟，从而实际生成跑步轨迹。这种方法的优缺点如下：</p>
<ul>
<li>优点
<ul>
<li>操作简单，不需要针对APP进行分析和逆向</li>
<li>通用，可以适用于各种打卡平台和系统</li>
</ul>
</li>
<li>缺点
<ul>
<li>耗时，需要挂机等同于跑步本身的时间</li>
</ul>
</li>
</ul>
<p>网络上已有的大多数教程普遍基于Xcode进行实现，但是由于Xcode版本更新以及使用存在门槛，很多开源教程的方法存在过时的问题。这里采用开源工具<a target="_blank" rel="noopener" href="https://github.com/Schlaubischlump/LocationSimulator">LocationSimulator</a>进行GPS模拟定位，比使用Xcode更加用户友好。关于LocationSimulator的具体安装以及使用可以参考GitHub上的项目主页，总体使用方法即使用数据线连接手机，选中已连接的设备，之后便可以通过GPX文件或者手动控制的方式进行GPS模拟了。</p>
<p>在完成软件安装之后，则需要确定对应的打卡地点的经纬度坐标，可以考虑直接在LocationSimulator结合手机地图软件进行标点，来确定对应位置的经纬度，也可以考虑使用google地图等别的方式。在操场跑道一圈标上足够多的点之后，可以考虑利用经纬度坐标加上轻微的随机化来生成跑步轨迹对应的GPX文件。</p>
<p>以北京大学五四操场作为打卡地点违例，在确定操场一圈的经纬度坐标之后，便可以采用以下代码进行GPX文件的生成。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;\n&lt;gpx version=\&quot;1.1\&quot; creator=\&quot;Xcode\&quot;&gt;\n&quot;</span>)</span><br><span class="line"></span><br><span class="line">points = [[<span class="number">39.98670783215012</span>, <span class="number">116.30664405734012</span>],</span><br><span class="line">          [<span class="number">39.98618352533768</span>, <span class="number">116.30672865002087</span>],</span><br><span class="line">          [<span class="number">39.98618352533768</span>, <span class="number">116.30672865002087</span>],</span><br><span class="line">          [<span class="number">39.98581016760418</span>, <span class="number">116.30678898677019</span>],</span><br><span class="line">          [<span class="number">39.98571908922798</span>, <span class="number">116.30689433671324</span>],</span><br><span class="line">          [<span class="number">39.98561288688673</span>, <span class="number">116.30708452367374</span>],</span><br><span class="line">          [<span class="number">39.98565674006142</span>, <span class="number">116.30742482197985</span>],</span><br><span class="line">          [<span class="number">39.98570648307997</span>, <span class="number">116.30754884871082</span>],</span><br><span class="line">          [<span class="number">39.98581008421271</span>, <span class="number">116.30760844737627</span>],</span><br><span class="line">          [<span class="number">39.98630069330874</span>, <span class="number">116.30760921192963</span>],</span><br><span class="line">          [<span class="number">39.98680940636073</span>, <span class="number">116.30751827280433</span>],</span><br><span class="line">          [<span class="number">39.98691331279552</span>, <span class="number">116.30743465659333</span>],</span><br><span class="line">          [<span class="number">39.98701527533597</span>, <span class="number">116.30723729348047</span>],</span><br><span class="line">          [<span class="number">39.98702174059007</span>, <span class="number">116.30706010182425</span>],</span><br><span class="line">          [<span class="number">39.98697385542131</span>, <span class="number">116.30689805739706</span>],</span><br><span class="line">          [<span class="number">39.98687734879176</span>, <span class="number">116.30675655334059</span>]]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">round</span> <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">for</span> lat, lon <span class="keyword">in</span> points:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;    &lt;wpt lat=\&quot;&#123;&#125;\&quot; lon=\&quot;&#123;&#125;\&quot;&gt;&lt;/wpt&gt;\n&quot;</span>.<span class="built_in">format</span>(</span><br><span class="line">            lat + random.random() * <span class="number">0.00005</span>, lon + random.random() * <span class="number">0.00005</span>))</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;&lt;/gpx&gt;&quot;</span>)</span><br></pre></td></tr></table></figure>
<p>之后直接运行Python脚本，将标准输出流重定向到文件，即可得到对应的GPX文件。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python gen_gpx.py &gt; circle.gpx</span><br></pre></td></tr></table></figure>
<p>在LocationSimulator通过<code>File</code> -&gt; <code>Open GPX File</code>导入GPX文件，此时GPS坐标就已经在操场上进行规律的运动了。在这个时候打开手机上对应的打卡软件便可以足不出户进行跑步打卡了，同时通过在Walk和Cycle模式当中切换可以调节跑步速度，使得最终的平均速度在打卡范围之内。</p>
<p><strong>P.S.</strong></p>
<ol>
<li>
<p>为保持LocationSimulator可以持续地对GPS定位进行修改，推荐保持电脑/手机屏幕常亮，避免锁屏。</p>
</li>
<li>
<p>由于连接有切断风险，所以LocationSimulator默认在断开链接之后仍然保持虚拟GPS，每次使用完记得点击左上角的<code>X</code>进行退出。</p>
</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/10/02/optiver-trivia-night/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/10/02/optiver-trivia-night/" class="post-title-link" itemprop="url">Optiver Trivia Night - Quiz部分记录</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-02 14:57:24" itemprop="dateCreated datePublished" datetime="2021-10-02T14:57:24+08:00">2021-10-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>这是关于Optiver Trivia Night的记录（主要关于最开始的Quiz部分），最开始部分为一个大约30min的Quiz，之后为Optiver实习项目相关的介绍和答疑。其中<a target="_blank" rel="noopener" href="https://www.optiver.com">Optiver</a>是一家全球顶级的做市商，具体信息可以参见官网。</p>
<p>Quiz部分的得分与正确率和答题速度相关，在大家都答对题目的情况下，答题更快的可以获得更高的得分。</p>
<p>第一名可以获得Optiver的终面机会，前五名获得AirPods。</p>
<p>题目总量为四十道，总共用时30min，总共分为几类问题：</p>
<ul>
<li>Quick Math (5s) - 基本的数学运算，难度大概在三位数加减法和两位数乘法的水平，重点可能在于时间限制较为紧迫</li>
<li>Fun Facts (20s) - 询问一些现实生活当中的数字，考察量级估计和现场搜索的能力</li>
<li>Find Pattern (30s) - 图形找规律，填写下一项是什么</li>
<li>Easy Brain Teasers (30s) - 较为简单，基本上是基本数学直觉的考察</li>
<li>Sequence (60s) - 数列找规律，填写下一项是什么</li>
<li>Medium Brain Teasers (60s) - 普通的概率问题</li>
<li>Hard Brain Teasers (120s) - 较复杂一些的概率问题</li>
</ul>
<p>最后排名为Rank 25/150，感觉如果有一定的面试准备的话应该进前十问题不是很大。大部分题目并不会很难，提供足够的时间都能够做的出来，只是在Quiz的情况下会有很强的时间紧迫感。</p>
<p>以下是一部分的题目记录，其中由于Quick Math部分时间过于紧张，所以基本上没有保存到截图。</p>
<p><em>部分Fun Facts可能会随着时间改变，这里的结果以2021年9月作为参考</em></p>
<hr />
<h3 id="no-7-hard-brain-teasers"><a class="markdownIt-Anchor" href="#no-7-hard-brain-teasers"></a> No. 7 (Hard Brain Teasers)</h3>
<p>10个人围成一个圈。每个人可以拍一拍左侧或者右侧的人，请问被拍的人的个数的期望是多少？</p>
<ol type="A">
  <li>2.5</li>
  <li>5</li>
  <li>7.5</li>
  <li>8.36</li>
</ol>
<p>Answer: C</p>
<h3 id="no-12-sequence"><a class="markdownIt-Anchor" href="#no-12-sequence"></a> No. 12 (Sequence)</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>7</mn><mo separator="true">,</mo><mn>1</mn><mn>6</mn><mo separator="true">,</mo><mn>6</mn><mn>5</mn><mo separator="true">,</mo><mo>?</mo></mrow><annotation encoding="application/x-tex">2,3,7,16,65,?
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathrm">2</span><span class="mpunct">,</span><span class="mord mathrm">3</span><span class="mpunct">,</span><span class="mord mathrm">7</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mord mathrm">6</span><span class="mpunct">,</span><span class="mord mathrm">6</span><span class="mord mathrm">5</span><span class="mpunct">,</span><span class="mclose">?</span></span></span></span></span></p>
<p>序列的下一个数字是什么?</p>
<ol type="A">
  <li>321</li>
  <li>81</li>
  <li>122</li>
  <li>179</li>
</ol>
Answer: A
<h3 id="no-13-fun-facts"><a class="markdownIt-Anchor" href="#no-13-fun-facts"></a> No. 13 (Fun Facts)</h3>
<p>以下最接近沪深市场一天的流通量的量级的是（以RMB计价）？</p>
<ol type="A">
  <li>10b/day (一百亿)</li>
  <li>100b/day (一千亿)</li>
  <li>1t/day (一万亿)</li>
  <li>10t/day (十万亿)</li>
</ol>
<p>Answer: C</p>
<h3 id="no-14-sequence"><a class="markdownIt-Anchor" href="#no-14-sequence"></a> No. 14 (Sequence)</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>5</mn><mo separator="true">,</mo><mn>2</mn><mn>9</mn><mo separator="true">,</mo><mn>5</mn><mn>6</mn><mo separator="true">,</mo><mn>1</mn><mn>0</mn><mn>8</mn><mo separator="true">,</mo><mn>2</mn><mn>0</mn><mn>8</mn><mo separator="true">,</mo><mo>?</mo></mrow><annotation encoding="application/x-tex">15,29,56,108,208,?
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">5</span><span class="mpunct">,</span><span class="mord mathrm">2</span><span class="mord mathrm">9</span><span class="mpunct">,</span><span class="mord mathrm">5</span><span class="mord mathrm">6</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mord mathrm">8</span><span class="mpunct">,</span><span class="mord mathrm">2</span><span class="mord mathrm">0</span><span class="mord mathrm">8</span><span class="mpunct">,</span><span class="mclose">?</span></span></span></span></span></p>
<p>序列的下一个数字是什么?</p>
<ol type="A">
  <li>400</li>
  <li>416</li>
  <li>438</li>
  <li>386</li>
</ol>
Answer: A
<h3 id="no-15-fun-facts"><a class="markdownIt-Anchor" href="#no-15-fun-facts"></a> No. 15 (Fun Facts)</h3>
<p>世界上最重的猪有多重</p>
<ol type="A">
  <li>1157kg</li>
  <li>1312kg</li>
  <li>694kg</li>
  <li>866kg</li>
</ol>
Answer: A
<h3 id="no16-hard-brain-teasers"><a class="markdownIt-Anchor" href="#no16-hard-brain-teasers"></a> No.16 (Hard Brain Teasers)</h3>
<p>有5封不同的信来自5个不同的人。如果我们随机分发信件，没有一个人收到Ta自己的信的概率是多少？</p>
<ol type="A">
  <li>4/5</li>
  <li>11/30</li>
  <li>7/20</li>
  <li>5/12</li>
</ol>
<p>Answer: B</p>
<h3 id="no-17-medium-brain-teasers"><a class="markdownIt-Anchor" href="#no-17-medium-brain-teasers"></a> No. 17 (Medium Brain Teasers)</h3>
<p>地上有一个10cm * 10cm的无限大网格，你随机扔一枚直径为1cm的硬币。问硬币碰到网格线上的概率是多少？</p>
<ol type="A">
  <li>50%</li>
  <li>25%</li>
  <li>19%</li>
  <li>11%</li>
</ol>
<p>Answer: C</p>
<h3 id="no-18-find-pattern"><a class="markdownIt-Anchor" href="#no-18-find-pattern"></a> No. 18 (Find Pattern)</h3>
<p><img src="https://s2.loli.net/2023/01/10/YtXlxehrBScTN4q.jpg" alt="" /></p>
<p>Answer: A</p>
<h3 id="no-19-medium-brain-teasers"><a class="markdownIt-Anchor" href="#no-19-medium-brain-teasers"></a> No. 19 (Medium Brain Teasers)</h3>
<p>红色柱体的高度是多少？</p>
<p><img src="https://s2.loli.net/2023/01/10/SAGM4Pb2yaV57ic.jpg" alt="" /></p>
<ol type="A">
  <li>8</li>
  <li>10</li>
  <li>20/3</li>
  <li>15</li>
</ol>
Answer: A
<h3 id="no-21-easy-brain-teasers"><a class="markdownIt-Anchor" href="#no-21-easy-brain-teasers"></a> No. 21 (Easy Brain Teasers)</h3>
<p>下列的哪一个不是素数？</p>
<ol type="A">
  <li>257</li>
  <li>289</li>
  <li>157</li>
  <li>349</li>
</ol>
Answer: B
<h3 id="no-22-medium-brain-teasers"><a class="markdownIt-Anchor" href="#no-22-medium-brain-teasers"></a> No. 22 (Medium Brain Teasers)</h3>
<p>你有机会可以对数字1~6进行下注，投掷三个骰子。如果你选择的数字出现一次，你获得$1；如果两次，你获得$2；如果三次，你获得$3。你所获得金额的期望是多少？</p>
<ol type="A">
  <li>$0</li>
  <li>$0.5</li>
  <li>$1</li>
  <li>$1/3</li>
</ol>
<p>Answer: B</p>
<h3 id="no-23-fun-facts"><a class="markdownIt-Anchor" href="#no-23-fun-facts"></a> No. 23 (Fun Facts)</h3>
<p>哪一个整数区间当中包含最多的素数？</p>
<ol type="A">
  <li>[1, 100]</li>
  <li>[101, 200]</li>
  <li>[201, 300]</li>
  <li>[301, 400]</li>
</ol>
<p>Answer: A</p>
<h3 id="no-24-hard-brain-teasers"><a class="markdownIt-Anchor" href="#no-24-hard-brain-teasers"></a> No. 24 (Hard Brain Teasers)</h3>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>1</mn><mo>+</mo><msqrt><mrow><mn>2</mn></mrow></msqrt><msup><mo>)</mo><mrow><mn>3</mn><mn>0</mn><mn>0</mn><mn>0</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(1+\sqrt{2})^{3000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9072200000000001em;"></span><span class="strut bottom" style="height:1.1572200000000001em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.06722000000000006em;"><span class="style-wrap reset-textstyle textstyle uncramped">√</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.8272200000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span>小数点后第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>0</mn><mn>0</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span>位的数字是多少？</p>
<p><em>提示：<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>(</mo><mn>1</mn><mo>+</mo><msqrt><mrow><mn>2</mn></mrow></msqrt><msup><mo>)</mo><mrow><mn>3</mn><mn>0</mn><mn>0</mn><mn>0</mn></mrow></msup><mo>+</mo><mo>(</mo><mn>1</mn><mo>−</mo><msqrt><mrow><mn>2</mn></mrow></msqrt><msup><mo>)</mo><mrow><mn>3</mn><mn>0</mn><mn>0</mn><mn>0</mn></mrow></msup></mrow><annotation encoding="application/x-tex">(1+\sqrt{2})^{3000} + (1-\sqrt{2})^{3000}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.9072200000000001em;"></span><span class="strut bottom" style="height:1.1572200000000001em;vertical-align:-0.25em;"></span><span class="base textstyle uncramped"><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">+</span><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.06722000000000006em;"><span class="style-wrap reset-textstyle textstyle uncramped">√</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.8272200000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="mbin">+</span><span class="mopen">(</span><span class="mord mathrm">1</span><span class="mbin">−</span><span class="sqrt mord"><span class="sqrt-sign" style="top:-0.06722000000000006em;"><span class="style-wrap reset-textstyle textstyle uncramped">√</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord textstyle cramped"><span class="mord mathrm">2</span></span></span><span style="top:-0.8272200000000001em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span><span class="mclose"><span class="mclose">)</span><span class="vlist"><span style="top:-0.363em;margin-right:0.05em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">3</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span><span class="mord mathrm">0</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span></span></span></span> 是一个整数</em></p>
<ol type="A">
  <li>0</li>
  <li>1</li>
  <li>4</li>
  <li>9</li>
</ol>
<p>Answer: D</p>
<h3 id="no-25-medium-brain-teasers"><a class="markdownIt-Anchor" href="#no-25-medium-brain-teasers"></a> No. 25 (Medium Brain Teasers)</h3>
<p>你站在地球的表面上，你往南走1英里，往西走1英里，往北走1英里，最后你停留在了你开始的地方。地球上有多少点可以让你完成以上的行为？</p>
<ol type="A">
  <li>0</li>
  <li>1</li>
  <li>2</li>
  <li>无穷多个</li>
</ol>
<p>Answer: D</p>
<h3 id="no-26-sequence"><a class="markdownIt-Anchor" href="#no-26-sequence"></a> No. 26 (Sequence)</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn><mn>1</mn><mo separator="true">,</mo><mn>8</mn><mn>5</mn><mo separator="true">,</mo><mn>9</mn><mn>4</mn><mo separator="true">,</mo><mn>8</mn><mn>3</mn><mo separator="true">,</mo><mn>9</mn><mn>7</mn><mo separator="true">,</mo><mn>8</mn><mn>1</mn><mo separator="true">,</mo><mo>?</mo><mo separator="true">,</mo><mn>7</mn><mn>9</mn></mrow><annotation encoding="application/x-tex">91,85,94,83,97,81,?,79
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathrm">9</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mord mathrm">8</span><span class="mord mathrm">5</span><span class="mpunct">,</span><span class="mord mathrm">9</span><span class="mord mathrm">4</span><span class="mpunct">,</span><span class="mord mathrm">8</span><span class="mord mathrm">3</span><span class="mpunct">,</span><span class="mord mathrm">9</span><span class="mord mathrm">7</span><span class="mpunct">,</span><span class="mord mathrm">8</span><span class="mord mathrm">1</span><span class="mpunct">,</span><span class="mclose">?</span><span class="mpunct">,</span><span class="mord mathrm">7</span><span class="mord mathrm">9</span></span></span></span></span></p>
<p>序列的下一个数字是什么?</p>
<ol type="A">
  <li>80</li>
  <li>100</li>
  <li>102</li>
  <li>95</li>
</ol>
<p>Answer: B</p>
<h3 id="no-27-hard-brain-teasers"><a class="markdownIt-Anchor" href="#no-27-hard-brain-teasers"></a> No. 27 (Hard Brain Teasers)</h3>
<p>考虑一个平面上的5个点，在所有的点之间两两连线，你拥有了x条直线。那么以下哪个不可能是x的值？</p>
<ol type="A">
  <li>5</li>
  <li>6</li>
  <li>7</li>
  <li>8</li>
</ol>
<p>Answer: C</p>
<h3 id="no-28-easy-brain-teasers"><a class="markdownIt-Anchor" href="#no-28-easy-brain-teasers"></a> No. 28 (Easy Brain Teasers)</h3>
<p>一个立方体的面、棱、顶点数的总和是多少？</p>
<ol type="A">
  <li>26</li>
  <li>28</li>
  <li>30</li>
  <li>24</li>
</ol>
Answer: A
<h3 id="no-29-sequence"><a class="markdownIt-Anchor" href="#no-29-sequence"></a> No. 29 (Sequence)</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn><mn>9</mn><mo separator="true">,</mo><mn>1</mn><mn>8</mn><mo separator="true">,</mo><mn>3</mn><mn>6</mn><mo separator="true">,</mo><mn>9</mn><mo separator="true">,</mo><mn>1</mn><mn>8</mn></mrow><annotation encoding="application/x-tex">99,18,36,9,18
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord mathrm">9</span><span class="mord mathrm">9</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mord mathrm">8</span><span class="mpunct">,</span><span class="mord mathrm">3</span><span class="mord mathrm">6</span><span class="mpunct">,</span><span class="mord mathrm">9</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mord mathrm">8</span></span></span></span></span></p>
<p>序列的下一个数字是什么?</p>
<ol type="A">
  <li>36</li>
  <li>27</li>
  <li>9</li>
  <li>3</li>
</ol>
<p>Answer: C</p>
<h3 id="no-31-fun-facts"><a class="markdownIt-Anchor" href="#no-31-fun-facts"></a> No. 31 (Fun Facts)</h3>
<p>一个标准的奥林匹克游泳池(25m * 50m * 2m) 有多少升水？</p>
<ol type="A">
  <li>250</li>
  <li>25000</li>
  <li>2500000</li>
  <li>250000000</li>
</ol>
Answer: C
<h3 id="no-34-hard-brain-teasers"><a class="markdownIt-Anchor" href="#no-34-hard-brain-teasers"></a> No. 34 (Hard Brain Teasers)</h3>
<p>一个密码只能以字母而不能以数字开头，那么<code>po88p881</code>有多少种排列可以是密码？</p>
<ol type="A">
  <li>315</li>
  <li>420</li>
  <li>525</li>
  <li>840</li>
</ol>
Answer: A
<h3 id="no-35-fun-facts"><a class="markdownIt-Anchor" href="#no-35-fun-facts"></a> No. 35 (Fun Facts)</h3>
<p>火星的平均温度是多少？</p>
<ol type="A">
  <li>-100°C</li>
  <li>-60°C</li>
  <li>-20°C</li>
  <li>20°C</li>
</ol>
Answer: B
<h3 id="no-36-medium-brain-teasers"><a class="markdownIt-Anchor" href="#no-36-medium-brain-teasers"></a> No. 36 (Medium Brain Teasers)</h3>
<p>考虑一个时钟，一天当中时针和分针会重合多少次？</p>
<ol type="A">
  <li>22</li>
  <li>23</li>
  <li>24</li>
  <li>26</li>
</ol>
<p>Answer: A</p>
<h3 id="no-37-easy-brain-teasers"><a class="markdownIt-Anchor" href="#no-37-easy-brain-teasers"></a> No. 37 (Easy Brain Teasers)</h3>
<p>如果下列命题有正确的话，哪一个命题是正确的？</p>
<ol type="A">
  <li>在列表中至少有1个命题是错误的</li>
  <li>在列表中至少有2个命题是错误的</li>
  <li>在列表中至少有3个命题是错误的</li>
  <li>在列表中至少有4个命题是错误的</li>
</ol>
Answer: A
<h3 id="no-38-sequence"><a class="markdownIt-Anchor" href="#no-38-sequence"></a> No. 38 (Sequence)</h3>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>−</mo><mn>3</mn><mo separator="true">,</mo><mn>3</mn><mo separator="true">,</mo><mn>2</mn><mn>7</mn><mo separator="true">,</mo><mn>6</mn><mn>9</mn><mo separator="true">,</mo><mn>1</mn><mn>2</mn><mn>9</mn><mo separator="true">,</mo><mo>?</mo></mrow><annotation encoding="application/x-tex">-3,3,27,69,129,?
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="base displaystyle textstyle uncramped"><span class="mord">−</span><span class="mord mathrm">3</span><span class="mpunct">,</span><span class="mord mathrm">3</span><span class="mpunct">,</span><span class="mord mathrm">2</span><span class="mord mathrm">7</span><span class="mpunct">,</span><span class="mord mathrm">6</span><span class="mord mathrm">9</span><span class="mpunct">,</span><span class="mord mathrm">1</span><span class="mord mathrm">2</span><span class="mord mathrm">9</span><span class="mpunct">,</span><span class="mclose">?</span></span></span></span></span></p>
<p>序列的下一个数字是什么?</p>
<ol type="A">
  <li>178</li>
  <li>207</li>
  <li>312</li>
  <li>268</li>
</ol>
Answer: B
<h3 id="no-39-find-pattern"><a class="markdownIt-Anchor" href="#no-39-find-pattern"></a> No. 39 (Find Pattern)</h3>
<p><img src="https://s2.loli.net/2023/01/10/lhUKm1OiSYGu7Fy.jpg" alt="" /></p>
<p>Answer: B</p>
<h3 id="no-40-hard-brain-teasers"><a class="markdownIt-Anchor" href="#no-40-hard-brain-teasers"></a> No. 40 (Hard Brain Teasers)</h3>
<p>一个国际象棋棋盘的每个小正方形边长都为2。请问在棋盘上作一个圆，能够使得整个圆的圆周都在黑色方形内部的最大的圆半径为多少？</p>
<ol type="A">
  <li>Sqrt(2)</li>
  <li>2</li>
  <li>Sqrt(10)</li>
  <li>Sqrt(34)</li>
</ol>
<p>Answer: C</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/09/02/rule-of-72/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/09/02/rule-of-72/" class="post-title-link" itemprop="url">Rule of 72</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-02 22:01:42" itemprop="dateCreated datePublished" datetime="2021-09-02T22:01:42+08:00">2021-09-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>所谓的72规则是一个用来在已知年化收益的情况下，估计投入资金实现翻倍需要年数的估算公式，公式表示如下：</p>
<p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mtext><mi mathvariant="normal">Y</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">s</mi><mtext> </mtext><mi mathvariant="normal">t</mi><mi mathvariant="normal">o</mi><mtext> </mtext><mi mathvariant="normal">D</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">u</mi><mi mathvariant="normal">b</mi><mi mathvariant="normal">l</mi><mi mathvariant="normal">e</mi></mtext><mo>=</mo><mfrac><mrow><mn>7</mn><mn>2</mn></mrow><mrow><mtext><mi mathvariant="normal">I</mi><mi mathvariant="normal">n</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">r</mi><mi mathvariant="normal">e</mi><mi mathvariant="normal">s</mi><mi mathvariant="normal">t</mi><mtext> </mtext><mi mathvariant="normal">R</mi><mi mathvariant="normal">a</mi><mi mathvariant="normal">t</mi><mi mathvariant="normal">e</mi></mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{Years to Double} = \frac{72}{\text{Interest Rate}}
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:1.32144em;"></span><span class="strut bottom" style="height:2.00744em;vertical-align:-0.686em;"></span><span class="base displaystyle textstyle uncramped"><span class="text mord displaystyle textstyle uncramped"><span class="mord mathrm" style="margin-right:0.025em;">Y</span><span class="mord mathrm">e</span><span class="mord mathrm">a</span><span class="mord mathrm">r</span><span class="mord mathrm">s</span><span class="mord mspace"> </span><span class="mord mathrm">t</span><span class="mord mathrm">o</span><span class="mord mspace"> </span><span class="mord mathrm">D</span><span class="mord mathrm">o</span><span class="mord mathrm">u</span><span class="mord mathrm">b</span><span class="mord mathrm">l</span><span class="mord mathrm">e</span></span><span class="mrel">=</span><span class="mord reset-textstyle displaystyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.686em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle cramped"><span class="mord textstyle cramped"><span class="text mord textstyle cramped"><span class="mord mathrm">I</span><span class="mord mathrm">n</span><span class="mord mathrm">t</span><span class="mord mathrm">e</span><span class="mord mathrm">r</span><span class="mord mathrm">e</span><span class="mord mathrm">s</span><span class="mord mathrm">t</span><span class="mord mspace"> </span><span class="mord mathrm">R</span><span class="mord mathrm">a</span><span class="mord mathrm">t</span><span class="mord mathrm">e</span></span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.677em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped"><span class="mord textstyle uncramped"><span class="mord mathrm">7</span><span class="mord mathrm">2</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span></span></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/06/18/rust-in-mac/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/18/rust-in-mac/" class="post-title-link" itemprop="url">MacOS上通过brew配置Rust开发环境</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-18 15:21:55" itemprop="dateCreated datePublished" datetime="2021-06-18T15:21:55+08:00">2021-06-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>首先通过homebrew安装rustup管理工具：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">brew install rustup</span></span><br></pre></td></tr></table></figure>
<p>安装完后发现并不能够找到rustup指令，通过<code>brew list</code>进行查询，发现实际上安装的为rustup-init，于是再在命令行执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rustup-init</span></span><br></pre></td></tr></table></figure>
<p>顺着流程安装完成之后，重启终端便可以安装好rust环境以及相关的工具链。</p>
<p>可以查看对应rustc以及cargo的版本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rustc --version</span></span><br><span class="line">rustc 1.53.0 (53cb7b09b 2021-06-17)</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">cargo --version</span></span><br><span class="line">cargo 1.53.0 (4369396ce 2021-04-27)</span><br></pre></td></tr></table></figure>
<p>简单的创建一个rust语言版的Hello World进行测试：</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Hello World!&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>将其保存为<code>hello.rs</code>。</p>
<p>在命令行使用rustc将其编译为可执行文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">rustc hello.rs</span></span><br></pre></td></tr></table></figure>
<p>之后直接执行可执行文件，便可以在终端看到对应的输出了！</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$ </span><span class="language-bash">./hello</span></span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/04/23/BT-must-win/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/04/23/BT-must-win/" class="post-title-link" itemprop="url">[Brain Teaser] 必胜策略</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-04-23 23:55:50" itemprop="dateCreated datePublished" datetime="2021-04-23T23:55:50+08:00">2021-04-23</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Bob和Alice被邀请参加一个卡牌游戏。庄家从一组扑克牌（4种花色，A-K）给Bob随机发放5张。Bob可以选择其中4张给Alice看，然后Alice被要求猜测Bob手中剩下的一张牌的花色和点数。</p>
<p><strong>问：</strong></p>
<p>Bob和Alice能否仅仅根据牌的花色和点数设计出一个策略，使得无论Bob拿到的是哪五张牌，Alice都能成功猜测出最后一张牌的花色和点数。</p>
<blockquote>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>3</mn><mo>=</mo><mn>2</mn><mo>∗</mo><mn>3</mn><mo>!</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">13 = 2 * 3! + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">3</span><span class="mrel">=</span><span class="mord mathrm">2</span><span class="mbin">∗</span><span class="mord mathrm">3</span><span class="mclose">!</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span></p>
</blockquote>
<p>有人直接给出了这么一个式子，感觉思考思考还是很有意思的。</p>
<p>首先两个重要前提，一个在于Bob可以自由选择翻牌的顺序，另一个就是可以选择让Alice猜哪一张牌。</p>
<p>而确定一张牌需要花色加上点数。</p>
<p>首先是花色，花色由于抽屉原理，一定会有两张相同花色的牌。那么可以将一张牌当作被猜的牌，另一张被第一个翻出，当作花色指示牌。</p>
<p>对于点数而言，剩下三张牌可以考虑预先对于花色和点数的组合大小进行一个定义，那么三张不同的牌一共涉及<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mo>!</mo><mo>=</mo><mn>6</mn></mrow><annotation encoding="application/x-tex">3!=6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">3</span><span class="mclose">!</span><span class="mrel">=</span><span class="mord mathrm">6</span></span></span></span>种排列方式，而<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mn>3</mn></mrow><annotation encoding="application/x-tex">13</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span><span class="mord mathrm">3</span></span></span></span>张牌A-K排成一个圆周，每一张牌到剩下十二张牌的距离都在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">6</span></span></span></span>以内（顺时针或逆时针）。于是可以预先定义顺/逆时针，然后以第一张标示牌沿顺/逆时针走<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>格。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi></mrow><annotation encoding="application/x-tex">k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.69444em;"></span><span class="strut bottom" style="height:0.69444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span>为之后三张牌组合出来对应的数字，由于Bob拥有一定的自主选择权，可以通过对调第一张牌和最后一张牌的方式来确保一定是可达的。</p>
<p>此时再回头看最开始的那个式子，只用一个公式描述清楚了整个状态，非常精妙！</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/02/18/trick-pytorch-rolling-window/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/18/trick-pytorch-rolling-window/" class="post-title-link" itemprop="url">[Trick] PyTorch构造滑动窗口</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-18 14:04:58" itemprop="dateCreated datePublished" datetime="2021-02-18T14:04:58+08:00">2021-02-18</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>涉及时间序列的数据当中常常会碰到需要将其转换成一个个滑动窗口来构造对应训练数据的场景，PyTorch里面提供了<code>torch.Tensor.unfold()</code>方法可以直接完成操作。</p>
<p>接受的三个参数依次如下：</p>
<ul>
<li><strong>dimension</strong> (<em>int</em>) – unfold操作所作用的维度</li>
<li><strong>size</strong> (<em>int</em>) – 滑动窗口的窗口大小</li>
<li><strong>step</strong> (<em>int</em>) – 滑动窗口的步长</li>
</ul>
<p>以下为使用的样例：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>x = torch.arange(<span class="number">1.</span>, <span class="number">8</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x</span><br><span class="line">tensor([ <span class="number">1.</span>,  <span class="number">2.</span>,  <span class="number">3.</span>,  <span class="number">4.</span>,  <span class="number">5.</span>,  <span class="number">6.</span>,  <span class="number">7.</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>x.unfold(<span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">tensor([[ <span class="number">1.</span>,  <span class="number">2.</span>],</span><br><span class="line">        [ <span class="number">2.</span>,  <span class="number">3.</span>],</span><br><span class="line">        [ <span class="number">3.</span>,  <span class="number">4.</span>],</span><br><span class="line">        [ <span class="number">4.</span>,  <span class="number">5.</span>],</span><br><span class="line">        [ <span class="number">5.</span>,  <span class="number">6.</span>],</span><br><span class="line">        [ <span class="number">6.</span>,  <span class="number">7.</span>]])</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2021/02/03/6824-lab1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2021/02/03/6824-lab1/" class="post-title-link" itemprop="url">MIT6.824 Lab1</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-03 16:55:54" itemprop="dateCreated datePublished" datetime="2021-02-03T16:55:54+08:00">2021-02-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="写在前面"><a class="markdownIt-Anchor" href="#写在前面"></a> 写在前面</h2>
<p>希望在寒假加上开学前两周自学完MIT 6.824课程，这个是MIT分布式系统的博士课程，应该也是分布式系统入门的神课。</p>
<p>采用的材料是2020Spring学期的材料，<s>如果没有弃坑的话</s>，对应的Lab解答都会同步更新到博客里面。</p>
<p>课程主页：<a target="_blank" rel="noopener" href="http://nil.csail.mit.edu/6.824/2020/schedule.html">http://nil.csail.mit.edu/6.824/2020/schedule.html</a></p>
<p>个人代码Repo：<a target="_blank" rel="noopener" href="https://github.com/Phimos/6.824-2020Spring">https://github.com/Phimos/6.824-2020Spring</a></p>
<h2 id="实现过程"><a class="markdownIt-Anchor" href="#实现过程"></a> 实现过程</h2>
<p>Lab1的主要任务就是通过Golang来实现一个MapReduce的算法，具体的内容可以从Lab1的官方文档中获取。</p>
<p>首先定义任务的类型，具体如下，最关键的就是对应的类型/状态/编号。同时利用<code>MapFile</code>和<code>ReduceFiles</code>字段来提供对应任务的输入。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> MapReduceTask <span class="keyword">struct</span> &#123;</span><br><span class="line">	TaskType   <span class="type">string</span> <span class="comment">// Map / Reduce / Wait</span></span><br><span class="line">	TaskStatus <span class="type">string</span> <span class="comment">// Unassigned / Assigned / Finished</span></span><br><span class="line">	TaskNum    <span class="type">int</span></span><br><span class="line"></span><br><span class="line">	MapFile     <span class="type">string</span>   <span class="comment">// Input of Map task</span></span><br><span class="line">	ReduceFiles []<span class="type">string</span> <span class="comment">// Input of Reduce task</span></span><br><span class="line"></span><br><span class="line">	NumReduce <span class="type">int</span></span><br><span class="line">	NumMap    <span class="type">int</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后定义RPC相关的参数和返回值，对于请求有两种，当是<code>finish</code>情况时，需要提供对应的<code>Task</code>字段便于修改Master里面的人物状态。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Args for RPC</span></span><br><span class="line"><span class="keyword">type</span> MapReduceArgs <span class="keyword">struct</span> &#123;</span><br><span class="line">	MessageType <span class="type">string</span> <span class="comment">// request / finish</span></span><br><span class="line">	Task        MapReduceTask</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Reply for RPC</span></span><br><span class="line"><span class="keyword">type</span> MapReduceReply <span class="keyword">struct</span> &#123;</span><br><span class="line">	Task MapReduceTask</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于Master的类型，实际上最关键的只有<code>MapTasks</code>、<code>ReduceTasks</code>以及<code>mu</code>三项，用来存储所有任务的状态。剩下的字段其实都可以根据任务的信息来进行统计，只是处于方便进行监测。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Master <span class="keyword">struct</span> &#123;</span><br><span class="line">	<span class="comment">// Your definitions here.</span></span><br><span class="line">	NumMap            <span class="type">int</span></span><br><span class="line">	NumMapFinished    <span class="type">int</span></span><br><span class="line">	NumReduce         <span class="type">int</span></span><br><span class="line">	NumReduceFinished <span class="type">int</span></span><br><span class="line">	mu                sync.Mutex</span><br><span class="line"></span><br><span class="line">	MapTasks    []MapReduceTask</span><br><span class="line">	ReduceTasks []MapReduceTask</span><br><span class="line"></span><br><span class="line">	MapFinish    <span class="type">bool</span></span><br><span class="line">	ReduceFinish <span class="type">bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后就根据Lab文档当中所给的Hints来梳理整个Lab1的内容。</p>
<blockquote>
<p>One way to get started is to modify <code>mr/worker.go</code>’s <code>Worker()</code> to send an RPC to the master asking for a task. Then modify the master to respond with the file name of an as-yet-unstarted map task. Then modify the worker to read that file and call the application Map function, as in <code>mrsequential.go</code>.</p>
</blockquote>
<p><code>Worker()</code>当中仿照样例里面的内容发送RPC请求，结果分为三类执行对应的<code>Map</code> 、<code>Reduce</code>、 <code>Wait</code>三类任务。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Worker</span><span class="params">(mapf <span class="keyword">func</span>(<span class="type">string</span>, <span class="type">string</span>)</span></span> []KeyValue,</span><br><span class="line">	reducef <span class="function"><span class="keyword">func</span><span class="params">(<span class="type">string</span>, []<span class="type">string</span>)</span></span> <span class="type">string</span>) &#123;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Your worker implementation here.</span></span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		args := MapReduceArgs&#123;MessageType: <span class="string">&quot;request&quot;</span>&#125;</span><br><span class="line">		reply := MapReduceReply&#123;&#125;</span><br><span class="line"></span><br><span class="line">		resp := call(<span class="string">&quot;Master.MapReduceHandler&quot;</span>, &amp;args, &amp;reply)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> !resp &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="keyword">switch</span> reply.Task.TaskType &#123;</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;Map&quot;</span>:</span><br><span class="line">			mapTask(mapf, reply.Task)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;Reduce&quot;</span>:</span><br><span class="line">			reduceTask(reducef, reply.Task)</span><br><span class="line">		<span class="keyword">case</span> <span class="string">&quot;Wait&quot;</span>:</span><br><span class="line">			waitTask()</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>对于Map的任务，主体部分直接参考<code>mrsequential.go</code>当中的代码，这里只需要从得到的task里面获取输入，并且修改对应的输出内容即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">mapTask</span><span class="params">(mapf <span class="keyword">func</span>(<span class="type">string</span>, <span class="type">string</span>)</span></span> []KeyValue, task MapReduceTask) &#123;</span><br><span class="line">	filename := task.MapFile</span><br><span class="line"></span><br><span class="line">	file, err := os.Open(filename)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;cannot open %v&quot;</span>, filename)</span><br><span class="line">	&#125;</span><br><span class="line">	content, err := ioutil.ReadAll(file)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;cannot read %v&quot;</span>, filename)</span><br><span class="line">	&#125;</span><br><span class="line">	file.Close()</span><br><span class="line"></span><br><span class="line">	kva := mapf(filename, <span class="type">string</span>(content))</span><br><span class="line"></span><br><span class="line">	kvaa := <span class="built_in">make</span>([][]KeyValue, task.NumReduce)</span><br><span class="line">	<span class="keyword">for</span> _, kv := <span class="keyword">range</span> kva &#123;</span><br><span class="line">		idx := ihash(kv.Key) % task.NumReduce</span><br><span class="line">		kvaa[idx] = <span class="built_in">append</span>(kvaa[idx], kv)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> i := <span class="number">0</span>; i &lt; task.NumReduce; i++ &#123;</span><br><span class="line">		storeIntermediateFile(kvaa[i], intermediateFilename(task.TaskNum, i))</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> finishTask(task)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The application Map and Reduce functions are loaded at run-time using the Go plugin package, from files whose names end in <code>.so</code>.</p>
</blockquote>
<p>这边的话是通过<code>.so</code>文件来直接获取用于Map和Reduce过程的具体函数，包括最终进行test的脚本文件也是通过加载不同的<code>.so</code>来实现不同的测试效果，例如对crash情况的模拟。以下是<code>worker.go</code>中的对应的内容，直接通过已有的<code>loadPlugin()</code>进行加载就可以了。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> <span class="built_in">len</span>(os.Args) != <span class="number">2</span> &#123;</span><br><span class="line">		fmt.Fprintf(os.Stderr, <span class="string">&quot;Usage: mrworker xxx.so\n&quot;</span>)</span><br><span class="line">		os.Exit(<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	mapf, reducef := loadPlugin(os.Args[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line">	mr.Worker(mapf, reducef)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>If you change anything in the <code>mr/</code> directory, you will probably have to re-build any MapReduce plugins you use, with something like <code>go build -buildmode=plugin ../mrapps/wc.go</code></p>
</blockquote>
<p>**这里每次都要重新build！**不然直接会出错，一开始没有注意到检查了挺久。</p>
<blockquote>
<p>This lab relies on the workers sharing a file system. That’s straightforward when all workers run on the same machine, but would require a global filesystem like GFS if the workers ran on different machines.</p>
</blockquote>
<p>由于是在同一台机器上去实现这样一个分布式的MapReduce方法，对文件系统实际上进行了一定程度的简化。</p>
<blockquote>
<p>A reasonable naming convention for intermediate files is <code>mr-X-Y</code>, where X is the Map task number, and Y is the reduce task number.</p>
</blockquote>
<p>这边利用一个函数来规范化对应<code>N x M</code>个中间文件的命名，具体的命名方式采用如上的<code>mr-X-Y</code>格式。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">intermediateFilename</span><span class="params">(numMapTask <span class="type">int</span>, numReduceTask <span class="type">int</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">	<span class="keyword">return</span> fmt.Sprintf(<span class="string">&quot;mr-%v-%v&quot;</span>, numMapTask, numReduceTask)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The worker’s map task code will need a way to store intermediate key/value pairs in files in a way that can be correctly read back during reduce tasks. One possibility is to use Go’s <code>encoding/json</code> package. To write key/value pairs to a JSON file:</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">enc := json.NewEncoder(file)</span><br><span class="line"><span class="keyword">for</span> _, kv := ... &#123;</span><br><span class="line">	err := enc.Encode(&amp;kv)</span><br></pre></td></tr></table></figure>
<p>and to read such a file back:</p>
 <figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">dec := json.NewDecoder(file)</span><br><span class="line"><span class="keyword">for</span> &#123;</span><br><span class="line"><span class="keyword">var</span> kv KeyValue</span><br><span class="line"><span class="keyword">if</span> err := dec.Decode(&amp;kv); err != <span class="literal">nil</span> &#123;</span><br><span class="line">	<span class="keyword">break</span> </span><br><span class="line">&#125;</span><br><span class="line">kva = <span class="built_in">append</span>(kva, kv)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>正如在上面所提到的，利用<code>encoding/json</code>对于中间结果进行存取，只需要对于以上的代码进行简单修改即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">storeIntermediateFile</span><span class="params">(kva []KeyValue, filename <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">	file, err := os.Create(filename)</span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;cannot open %v&quot;</span>, filename)</span><br><span class="line">	&#125;</span><br><span class="line">	enc := json.NewEncoder(file)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatal(<span class="string">&quot;cannot create encoder&quot;</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">for</span> _, kv := <span class="keyword">range</span> kva &#123;</span><br><span class="line">		err := enc.Encode(&amp;kv)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			log.Fatal(<span class="string">&quot;cannot encode&quot;</span>)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">loadIntermediateFile</span><span class="params">(filename <span class="type">string</span>)</span></span> []KeyValue &#123;</span><br><span class="line">	<span class="keyword">var</span> kva []KeyValue</span><br><span class="line">	file, err := os.Open(filename)</span><br><span class="line">	<span class="keyword">defer</span> file.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		log.Fatalf(<span class="string">&quot;cannot open %v&quot;</span>, filename)</span><br><span class="line">	&#125;</span><br><span class="line">	dec := json.NewDecoder(file)</span><br><span class="line">	<span class="keyword">for</span> &#123;</span><br><span class="line">		kv := KeyValue&#123;&#125;</span><br><span class="line">		<span class="keyword">if</span> err := dec.Decode(&amp;kv); err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">break</span></span><br><span class="line">		&#125;</span><br><span class="line">		kva = <span class="built_in">append</span>(kva, kv)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> kva</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The map part of your worker can use the <code>ihash(key)</code> function (in <code>worker.go</code>) to pick the reduce task for a given key.</p>
</blockquote>
<p>这是<code>mapTask()</code>当中对应的代码部分，在下面的第5行可以看到，通过<code>ihash(key) % nReduce</code>来得到对应的中间输出文件，进行中间结果的划分。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">kva := mapf(filename, <span class="type">string</span>(content))</span><br><span class="line"></span><br><span class="line">kvaa := <span class="built_in">make</span>([][]KeyValue, task.NumReduce)</span><br><span class="line"><span class="keyword">for</span> _, kv := <span class="keyword">range</span> kva &#123;</span><br><span class="line">	idx := ihash(kv.Key) % task.NumReduce</span><br><span class="line">	kvaa[idx] = <span class="built_in">append</span>(kvaa[idx], kv)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i := <span class="number">0</span>; i &lt; task.NumReduce; i++ &#123;</span><br><span class="line">	storeIntermediateFile(kvaa[i], intermediateFilename(task.TaskNum, i))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>You can steal some code from <code>mrsequential.go</code> for reading Map input files, for sorting intermedate key/value pairs between the Map and Reduce, and for storing Reduce output in files.</p>
</blockquote>
<p><s>读书人的事情，能够叫做偷吗</s></p>
<p>既然说了让抄，那就直接从<code>mrsequential.go</code>里面抄就好了，对应的输入输出需要进行修改，主体部分直接粘贴即可。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reduceTask</span><span class="params">(reducef <span class="keyword">func</span>(<span class="type">string</span>, []<span class="type">string</span>)</span></span> <span class="type">string</span>, task MapReduceTask) &#123;</span><br><span class="line">	<span class="keyword">var</span> intermediate []KeyValue</span><br><span class="line">	<span class="keyword">for</span> _, filename := <span class="keyword">range</span> task.ReduceFiles &#123;</span><br><span class="line">		intermediate = <span class="built_in">append</span>(intermediate, loadIntermediateFile(filename)...)</span><br><span class="line">	&#125;</span><br><span class="line">	sort.Sort(ByKey(intermediate))</span><br><span class="line">	oname := fmt.Sprintf(<span class="string">&quot;mr-out-%v&quot;</span>, task.TaskNum)</span><br><span class="line">	ofile, _ := os.Create(oname)</span><br><span class="line"></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	<span class="comment">// call Reduce on each distinct key in intermediate[],</span></span><br><span class="line">	<span class="comment">// and print the result to mr-out-0.</span></span><br><span class="line">	<span class="comment">//</span></span><br><span class="line">	i := <span class="number">0</span></span><br><span class="line">	<span class="keyword">for</span> i &lt; <span class="built_in">len</span>(intermediate) &#123;</span><br><span class="line">		j := i + <span class="number">1</span></span><br><span class="line">		<span class="keyword">for</span> j &lt; <span class="built_in">len</span>(intermediate) &amp;&amp; intermediate[j].Key == intermediate[i].Key &#123;</span><br><span class="line">			j++</span><br><span class="line">		&#125;</span><br><span class="line">		values := []<span class="type">string</span>&#123;&#125;</span><br><span class="line">		<span class="keyword">for</span> k := i; k &lt; j; k++ &#123;</span><br><span class="line">			values = <span class="built_in">append</span>(values, intermediate[k].Value)</span><br><span class="line">		&#125;</span><br><span class="line">		output := reducef(intermediate[i].Key, values)</span><br><span class="line"></span><br><span class="line">		<span class="comment">// this is the correct format for each line of Reduce output.</span></span><br><span class="line">		fmt.Fprintf(ofile, <span class="string">&quot;%v %v\n&quot;</span>, intermediate[i].Key, output)</span><br><span class="line"></span><br><span class="line">		i = j</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	ofile.Close()</span><br><span class="line"></span><br><span class="line">	<span class="keyword">defer</span> finishTask(task)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The master, as an RPC server, will be concurrent; don’t forget to lock shared data.</p>
</blockquote>
<p>这里需要上锁的是Master，防止多个Worker进行同时的修改，我这里采用了一个非常暴力的大锁，在<code>MapReduceHandler()</code>的最开始对Master上锁，然后利用<code>defer</code>在函数退出之后进行锁的释放，保证每次只有一个<code>MapReduceHandler()</code>对Master当中的结构进行修改，确保对并发可以正确处理。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Your code here -- RPC handlers for the worker to call.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span></span> MapReduceHandler(args *MapReduceArgs, reply *MapReduceReply) <span class="type">error</span> &#123;</span><br><span class="line">	m.mu.Lock()</span><br><span class="line">	<span class="keyword">defer</span> m.mu.Unlock()</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>Use Go’s race detector, with <code>go build -race</code> and <code>go run -race</code>. <code>test-mr.sh</code> has a comment that shows you how to enable the race detector for the tests.</p>
</blockquote>
<p>这边是课上所提到的检验race的方法，go语言可以通过对于内存进行监控的情况来查看是否有race发生，但是不会被执行的代码当中的race错误是不会被分析出来的，因为go语言并没有对race进行一个静态的分析。</p>
<blockquote>
<p>Workers will sometimes need to wait, e.g. reduces can’t start until the last map has finished. One possibility is for workers to periodically ask the master for work, sleeping with <code>time.Sleep()</code> between each request. Another possibility is for the relevant RPC handler in the master to have a loop that waits, either with <code>time.Sleep()</code> or <code>sync.Cond</code>. Go runs the handler for each RPC in its own thread, so the fact that one handler is waiting won’t prevent the master from processing other RPCs.</p>
</blockquote>
<p>暂时还没有新的Task分配的状况，会在Map的任务已经全部分配下去但是还没有全部完成的情况出现。这个时候Master给Worker一个Wait的指令，通过<code>time.Sleep()</code>等待之后再次发送一个申请新任务的RPC请求。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">waitTask</span><span class="params">()</span></span> &#123;</span><br><span class="line">	time.Sleep(time.Second)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The master can’t reliably distinguish between crashed workers, workers that are alive but have stalled for some reason, and workers that are executing but too slowly to be useful. The best you can do is have the master wait for some amount of time, and then give up and re-issue the task to a different worker. For this lab, have the master wait for ten seconds; after that the master should assume the worker has died (of course, it might not have).</p>
</blockquote>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> args.MessageType == <span class="string">&quot;request&quot;</span> &#123;</span><br><span class="line">	<span class="keyword">if</span> !m.MapFinish &#123;</span><br><span class="line">		<span class="keyword">for</span> index, task := <span class="keyword">range</span> m.MapTasks &#123;</span><br><span class="line">			<span class="keyword">if</span> task.TaskStatus == <span class="string">&quot;Unassigned&quot;</span> &#123;</span><br><span class="line">				m.MapTasks[index].TaskStatus = <span class="string">&quot;Assigned&quot;</span></span><br><span class="line">				reply.Task = m.MapTasks[index]</span><br><span class="line">				<span class="keyword">go</span> m.checkTimeout(<span class="string">&quot;Map&quot;</span>, index, <span class="number">10</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		reply.Task.TaskType = <span class="string">&quot;Wait&quot;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span> !m.ReduceFinish &#123;</span><br><span class="line">		<span class="keyword">for</span> index, task := <span class="keyword">range</span> m.ReduceTasks &#123;</span><br><span class="line">			<span class="keyword">if</span> task.TaskStatus == <span class="string">&quot;Unassigned&quot;</span> &#123;</span><br><span class="line">				m.ReduceTasks[index].TaskStatus = <span class="string">&quot;Assigned&quot;</span></span><br><span class="line">				reply.Task = m.ReduceTasks[index]</span><br><span class="line">				<span class="keyword">go</span> m.checkTimeout(<span class="string">&quot;Reduce&quot;</span>, index, <span class="number">10</span>)</span><br><span class="line">				<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		reply.Task.TaskType = <span class="string">&quot;Wait&quot;</span></span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>具体的<code>checkTimeout()</code>实现如下，就是进行一定时间的Sleep，之后检查任务是否完成，如果仍然没有完成处于<code>Assigned</code>状态的话，说明对应的Worker可能已经crash了。于是将其标为<code>Unassigned</code>状态，在之后进行重分配，保证MapReduce流程可以继续运行。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(m *Master)</span></span> checkTimeout(taskType <span class="type">string</span>, num <span class="type">int</span>, timeout <span class="type">int</span>) &#123;</span><br><span class="line">	time.Sleep(time.Second * time.Duration(timeout))</span><br><span class="line">	m.mu.Lock()</span><br><span class="line">	<span class="keyword">defer</span> m.mu.Unlock()</span><br><span class="line">	<span class="keyword">if</span> taskType == <span class="string">&quot;Map&quot;</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> m.MapTasks[num].TaskStatus == <span class="string">&quot;Assigned&quot;</span> &#123;</span><br><span class="line">			m.MapTasks[num].TaskStatus = <span class="string">&quot;Unassigned&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> m.ReduceTasks[num].TaskStatus == <span class="string">&quot;Assigned&quot;</span> &#123;</span><br><span class="line">			m.ReduceTasks[num].TaskStatus = <span class="string">&quot;Unassigned&quot;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>To test crash recovery, you can use the <code>mrapps/crash.go</code> application plugin. It randomly exits in the Map and Reduce functions.</p>
</blockquote>
<p>Test的最后一个部分就是crash test，会使用<code>crash.so</code>文件，事实上，在上面利用一个go routine取检查超时，如果一个worker在工作过程中crash了，那么就无法在最后返回个master一个<code>Finish</code>的RPC。所以利用以上的超时检查机制，是可以简单的对于Lab当中的crash进行正确重分配任务，保证MapReduce流程正常进行。</p>
<blockquote>
<p>To ensure that nobody observes partially written files in the presence of crashes, the MapReduce paper mentions the trick of using a temporary file and atomically renaming it once it is completely written. You can use <code>ioutil.TempFile</code> to create a temporary file and <code>os.Rename</code> to atomically rename it.</p>
</blockquote>
<p>这边只需要修改对应的输出为<code>TempFile -&gt; Rename</code>的流程就可以，这里就不进行修改了。</p>
<blockquote>
<p><code>test-mr.sh</code> runs all the processes in the sub-directory <code>mr-tmp</code>, so if something goes wrong and you want to look at intermediate or output files, look there.</p>
</blockquote>
<p>执行<code>sh test-mr.sh</code>的结果如下所示，可以发现对于Lab1的所有测试都完全通过。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">*** Starting wc test.</span><br><span class="line">2021/02/03 16:24:03 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three</span><br><span class="line">--- wc test: PASS</span><br><span class="line">*** Starting indexer test.</span><br><span class="line">2021/02/03 16:24:09 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three</span><br><span class="line">--- indexer test: PASS</span><br><span class="line">*** Starting map parallelism test.</span><br><span class="line">2021/02/03 16:24:12 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three</span><br><span class="line">--- map parallelism test: PASS</span><br><span class="line">*** Starting reduce parallelism test.</span><br><span class="line">2021/02/03 16:24:20 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three</span><br><span class="line">--- reduce parallelism test: PASS</span><br><span class="line">*** Starting crash test.</span><br><span class="line">2021/02/03 16:24:28 rpc.Register: method &quot;Done&quot; has 1 input parameters; needs exactly three</span><br><span class="line">--- crash test: PASS</span><br><span class="line">*** PASSED ALL TESTS</span><br></pre></td></tr></table></figure>
<h2 id="体验"><a class="markdownIt-Anchor" href="#体验"></a> 体验</h2>
<ul>
<li>Golang上手的感觉还行，感觉和C语言差别不大，有C语言的基础熟悉一下语言特性应该就可以上手。</li>
<li>难度一般，可能是Lab1的缘故，总体实现上困难不是很大。</li>
<li>从文档和代码上看，整个Lab的结构上感觉没有6.828课程的巧妙，但是已经非常完备了，远超国内学校课程作业的实用程度。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2020/12/31/goodbye-2020/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/12/31/goodbye-2020/" class="post-title-link" itemprop="url">Goodbye 2020</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-12-31 12:20:42" itemprop="dateCreated datePublished" datetime="2020-12-31T12:20:42+08:00">2020-12-31</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>2020</p>
<p>有所得</p>
<p>有所失</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://phimos.github.io/2020/09/07/ChengQi-Capital-Interview-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Pims">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Pims的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2020/09/07/ChengQi-Capital-Interview-2/" class="post-title-link" itemprop="url">CQ资产面试回忆</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-09-07 22:29:23" itemprop="dateCreated datePublished" datetime="2020-09-07T22:29:23+08:00">2020-09-07</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>面试完全没有提到跟简历有关的内容，基本就是问智力题，感觉答得非常一般。</p>
<p>最终面试结果为未通过。</p>
<ol>
<li>（博弈论）ABC三家公司，在0-100的101个整数点上都存在住户，按照ABC的顺序每个人依次选择1-100当中的一个位置作为公司的办公地点，住户会选择离他最近的公司。为了最大化收益（最大化到自己公司的用户数量），A的最优选择是什么？</li>
</ol>
<p>就是一个博弈论的问题，应该算Best Response逐层上推就好了，当时面试只讲了思路，没有算出来。</p>
<ol start="2">
<li>有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>个序列，每个序列有3个数字，任意两组之间的correlation都小于0.7，问<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.68333em;"></span><span class="strut bottom" style="height:0.68333em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.10903em;">N</span></span></span></span>可能的最大取值是多少。</li>
</ol>
<p>将其转变成一个三维的单位球，问求表面能够取多少向量，两两之间夹角的余弦值小于0.7。可以通过用正三角形的构造方法，来利用立体角构造上界。但并不知道怎么计算准确值，当时面试官说可以计算出准确的结果。</p>
<ol start="3">
<li>一个没有记忆功能科学计算器，加减乘除和数字键都坏了，可以采用类似三角函数，取倒数，对数，开方，阶乘等操作。最开始只有一个0，如何得到任意整数？如何得到任意有理数？</li>
</ol>
<p>本质是利用直角边为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mrow><mi>n</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.8002800000000001em;"></span><span class="strut bottom" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="base textstyle uncramped"><span class="sqrt mord"><span class="sqrt-sign" style="top:0.03971999999999998em;"><span class="style-wrap reset-textstyle textstyle uncramped">√</span></span><span class="vlist"><span style="top:0em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="mord textstyle cramped"><span class="mord mathit">n</span></span></span><span style="top:-0.72028em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span><span class="reset-textstyle textstyle uncramped sqrt-line"></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:1em;">​</span></span>​</span></span></span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span></span></span></span>的直角三角形。</p>
<p>首先通过取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cos</mi></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mop">cos</span></span></span></span>得到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">1</span></span></span></span>，然后依次采用<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>arctan</mi></mrow><annotation encoding="application/x-tex">\arctan</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.61508em;"></span><span class="strut bottom" style="height:0.61508em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mop">arctan</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>cos</mi></mrow><annotation encoding="application/x-tex">\cos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mop">cos</span></span></span></span>，取倒数，平方，就可以得到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">2</span></span></span></span>。开方之后再次通过以上流程就可以得到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.64444em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathrm">3</span></span></span></span>，依次类推可以得到任意整数。</p>
<p>对于任意有理数，实际上要可以得到任意的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>m</mi></mrow><mrow><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{m}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>，由上面的流程，我们可以在知道<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi></mrow><annotation encoding="application/x-tex">r</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.43056em;"></span><span class="strut bottom" style="height:0.43056em;vertical-align:0em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span></span></span></span>的情况下，得到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord mathit" style="margin-right:0.02778em;">r</span><span class="mbin">+</span><span class="mord mathrm">1</span></span></span></span>，同时可以得到任意的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>。</p>
<p>那么对于任意的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mi>m</mi></mrow><mrow><mi>n</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{m}{n}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.695392em;"></span><span class="strut bottom" style="height:1.040392em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit">n</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathit">m</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>，总是用大的减去小的，就可以最终化成一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mrow><mn>1</mn></mrow><mrow><mi>k</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">\frac{1}{k}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.845108em;"></span><span class="strut bottom" style="height:1.190108em;vertical-align:-0.345em;"></span><span class="base textstyle uncramped"><span class="mord reset-textstyle textstyle uncramped"><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span><span class="mfrac"><span class="vlist"><span style="top:0.345em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle cramped"><span class="mord scriptstyle cramped"><span class="mord mathit" style="margin-right:0.03148em;">k</span></span></span></span><span style="top:-0.22999999999999998em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle textstyle uncramped frac-line"></span></span><span style="top:-0.394em;"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span><span class="reset-textstyle scriptstyle uncramped"><span class="mord scriptstyle uncramped"><span class="mord mathrm">1</span></span></span></span><span class="baseline-fix"><span class="fontsize-ensurer reset-size5 size5"><span style="font-size:0em;">​</span></span>​</span></span></span><span class="sizing reset-size5 size5 reset-textstyle textstyle uncramped nulldelimiter"></span></span></span></span></span>的形式，这个是可以得到的，之后再反复利用倒数和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="strut" style="height:0.64444em;"></span><span class="strut bottom" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="base textstyle uncramped"><span class="mord">+</span><span class="mord mathrm">1</span></span></span></span>的操作反推回去，就可以得到任意有理数了。</p>
<ol start="4">
<li>笔试当中提到的，最奇怪的交易股票的策略。</li>
</ol>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Pims</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">36</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Pims</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v7.3.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
